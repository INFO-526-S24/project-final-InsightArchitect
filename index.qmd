---
title: "Global Poverty Trends: A Comprehensive Dataset for Research and Development"
subtitle: "INFO 526 - Project Final"
author: 
  - name: "InsightArchitect - Ayesha, Shreemithra, Anusha, Eeshaan, Kaarthik, Amaan"
    affiliations:
      - name: "School of Information, University of Arizona"
description: "Project description"
format:
   html:
    code-tools: true
    code-overflow: wrap
    embed-resources: true
editor: visual
execute:
  warning: false
  echo: false
---

## Abstract

## Introduction

```{r}
#| label: load-pkgs
#| message: false
#| echo: false

library(tidyverse,
        png)
library(ggplot2)
library(dplyr)
library(scales)  
library(tidyr)
#install.packages("gganimate")
library(gganimate)

```

```{r}
#| label: load-dataset
#| message: false
#| warning: false
#| echo: false

pip_row_data <- read.csv('data/pip_dataset.csv')
ex_pro_data <- read.csv('data/globalextremepovertyrate_world-bank2020.csv')
```

## Justification of approach

## Questions 01: Who is Conquering Extreme Poverty in Various Global Regions Across Time? How does the distribution of wealth differ among various income groups?

### Visualization

#### Plot 01 : Stacked Bar Chart to know Poverty Trends over the year

```{r}
#| label: stacked-bar-chart
#| message: false
#| warning: false
#| echo: false

# Filter the data to include only specified years
years_to_include <- c(1820, 1850, 1870, 1890, 1910, 1929, 1950, 1960, 1970, 1980:2017)
ex_pro_data_filtered <- ex_pro_data %>%
  filter(Year %in% years_to_include) %>%
  mutate(Year = factor(Year, levels = years_to_include))  # Convert Year to a factor

# Transform data for plotting in a long format suitable for ggplot2
ex_pro_data_long <- pivot_longer(
  ex_pro_data_filtered,
  cols = c( "Number.of.people.living.in.extreme.poverty", "Number.of.people.not.living.in.extreme.poverty"),
  names_to = "Status",
  values_to = "Count"
) %>%
    mutate(Count = Count / 1e9,  # Convert to billions
         Status = recode(Status,
                         "Number.of.people.living.in.extreme.poverty" = "In Extreme Poverty",
                         "Number.of.people.not.living.in.extreme.poverty" = "Not in Extreme Poverty"))

# Stacked Bar Chart with counts on bars
stacked_absolute_bar_chart <- ggplot(ex_pro_data_long, aes(x = Year, y = Count, fill = Status)) +
  geom_bar(stat = "identity") +
  geom_text(
    aes(label = scales::comma(Count, accuracy = 0.1), group = Status),
    position = position_stack(vjust = 0.5),  # Adjust vertical position to be inside the bar
    color = "black",  # Choose a text color that stands out
    size = 4  # Adjust text size for visibility
  ) +
  labs(title = "Stacked Bar Chart of Population by Poverty Status",
       x = "Year", y = "Count (Billions)",
       fill = "Status") +
  theme_minimal() +
  theme(legend.position = "bottom")  # Positioning the legend at the bottom

# save the plots
ggsave("images/stacked_absolute_bar_chart.png", stacked_absolute_bar_chart, width = 18, height = 8, bg="white")

# Animated Plot
animated_plot <- stacked_absolute_bar_chart +
  transition_layers(
    layer_length = 1,    # Duration each layer is static
    transition_length = 1,  # Duration of the transition between layers
    keep_layers = FALSE   # Whether to keep previous layers visible
  ) +
  enter_fade() +         # Layers fade in
  enter_drift(x_mod = 0, y_mod = -10) +  # Drift effect from below
  exit_fade() +          # Layers fade out
  ease_aes('linear')     # Smooth linear transition

# Render the animation
#anim_save("images/animated_stacked_bar_chart02.gif", animated_plot, width = 1200, height = 600, fps = 10, duration = 20)


```

<img src="images/animated_stacked_bar_chart02.gif" alt="Stacked Bar Chart of Population by Poverty Status" width="100%"/>


**Visualization Descriptions:**



#### Plot 02 : Ridge Plot for Wealth Distribution Analysis:

A 'Ridge Plot' is a great tool to compare the distribution of a continuous variable between groups; in this case, the distribution of wealth as determined by `s80_s20_ratio`, `gini`, and `palma_ratio` among different income groups. "Ridge plots" are just a set of vertically arranged, slightly overlapped density charts for every group. It is simpler to compare the distributions and see trends or outlines with this setup in place.

**Dependency Columns:**

For Plot 02 dependent columns are **`gini`**, **`palma_ratio`** and **`s80_s20_ratio`**

**Visualization Descriptions:**


## Discussion 

